(()=>{"use strict";const e=window.React,t=window.wp.blocks,s=window.wp.i18n,l=window.wp.blockEditor,o=window.wp.components,i=window.wp.data;(0,t.registerBlockType)("similar-posts/block",{title:(0,s.__)("Similar posts","similar-posts-plugin"),icon:"admin-post",category:"widgets",attributes:{postsToShow:{type:"number",default:2},displayAsList:{type:"boolean",default:!1}},edit:({attributes:t,setAttributes:n})=>{const{postsToShow:r,displayAsList:a}=t,p=(0,l.useBlockProps)(),c=wp.data.select("core/editor").getCurrentPostId(),d=(0,i.useSelect)((e=>{const{getEntityRecords:t}=e("core"),{getEditedPostAttribute:s}=e("core/editor"),l=s("categories");return l&&0!==l.length?t("postType","post",{per_page:r,exclude:[c],categories:l}):[]}),[r]);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,s.__)("Settings","similar-posts-plugin")},(0,e.createElement)(o.RangeControl,{label:(0,s.__)("Number of posts to display","similar-posts-plugin"),value:r,onChange:e=>n({postsToShow:e}),min:1,max:4}),(0,e.createElement)(o.CheckboxControl,{label:(0,s.__)("Display as list","similar-posts-plugin"),checked:a,onChange:e=>n({displayAsList:e})}))),d?d.length>0?(0,e.createElement)("ul",{...p},d.map((t=>(0,e.createElement)("li",{key:t.id},(0,e.createElement)("a",{href:t.link},t.title.rendered))))):(0,e.createElement)(o.Placeholder,null,(0,s.__)("No related posts to display.","similar-posts-plugin")):(0,e.createElement)(o.Spinner,null))},save:()=>null})})();